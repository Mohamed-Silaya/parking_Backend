
# ๐ ูุดุฑูุน ุฅุฏุงุฑุฉ ุญุฌุฒ ุงูุฌุฑุงุฌุงุช (Parking Management System)

## โ ุงููููุฉ ุงููููุฐุฉ
ุชู ุชุทููุฑ ููุฒุฉ ุญุฌุฒ ููุงู ูู ุงูุฌุฑุงุฌ ูุฑุจุทูุง ุจูุธุงู Celery ููุชุญูู ูู ูุตูู ุงูุณุงุฆู ุฎูุงู ูุชุฑุฉ ุงูุณูุงุญ. ูู ุญุงูุฉ ุนุฏู ูุตูููุ ูุชู ุชูุจููู ุจุฃู ุงูุญุฌุฒ ุณููุบู ุฃู ููููู ุฏูุน ุชูููุฉ ูุชุฃููุฏ ุงูุญุฌุฒ.

---

## ๐ง ููู ุชุนูู ุงูููุฒุฉุ

1. **ุนูุฏ ุงูุญุฌุฒ**:
   - ูุชู ุชุญุฏูุฏ ุงูุฌุฑุงุฌ ูุงูููุงู ูููุช ุงููุตูู ุงููุชููุน.
   - ูุชู ุญุณุงุจ ููุช ุงูุชูุงุก ุตูุงุญูุฉ ุงูุญุฌุฒ (ุจุงุณุชุฎุฏุงู ูุชุฑุฉ ุงูุณูุงุญ).
   - ูุชู ุชุบููุฑ ุญุงูุฉ ุงูููุงู ุฅูู "ูุญุฌูุฒ".
   - ูุชู ุฅูุดุงุก ูุงุฆู ุญุฌุฒ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุญุงูุฉ "pending".
   - ูุชู ุฌุฏููุฉ ูููุฉ ุจุงุณุชุฎุฏุงู Celery ููุชุญูู ุจุนุฏ ูุชุฑุฉ ุงูุณูุงุญ.

2. **ูููุฉ Celery**:
   - ุนูุฏ ุงูุชูุงุก ุงูููุชุ ูุชู ุงูุชุญูู ูู ุงูุณุงุฆู ูุตู ุฃู ูุง.
   - ุฅุฐุง ูู ูุตู:
     - ูุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุญุฌุฒ ุฅูู `awaiting_response`.
     - ูุชู ุฅุนุงุฏุฉ ุงูููุงู ูุญุงูุชู ุงูุฃุตููุฉ `available`.
     - ูุชู ุทุจุงุนุฉ ุชูุจูู ุนูู ุงูู Worker.

---

## ๐ง ุงูุฅุนุฏุงุฏ ูุชุดุบูู ุงููููุฉ

### 1. ุชุดุบูู Redis (ูู ูุฌูุฏ Redis):
```bash
.
edis-server.exe
```

### 2. ุชุดุบูู Celery:
```bash
celery -A project worker --loglevel=info --pool=solo
```

> **ููุงุญุธุฉ**: ุงุณุชุฎุฏู `--pool=solo` ูู Windows.

### 3. ุฅุฑุณุงู ุทูุจ ุงูุญุฌุฒ ูู Postman:
```http
POST /api/bookings/initiate/
Headers: Authorization: Bearer <access_token>

{
  "garage_id": 1,
  "parking_spot_id": 2,
  "estimated_arrival_time": "2025-07-04T17:30:00"
}
```

---

## ๐ ูุซุงู ุญุงูุฉ ูุงุฌุญุฉ:
```json
{
  "booking_id": 3,
  "estimated_cost": 20.0,
  "reservation_expiry_time": "2025-07-04T15:27:17.464621+00:00",
  "status": "success"
}
```

## โฐ ุจุนุฏ ุงูุชูุงุก ูุชุฑุฉ ุงูุณูุงุญ (ูู Celery):
```
๐จ ุงูุชูุจูู: ูู ูุตู ุงูุณุงุฆู ูู ุงูููุช ุงููุญุฏุฏ.
```

---

## ๐ ุงููููุงุช ุงูุชู ุชู ุชุนุฏูููุง:

- `booking/views.py` โ ุฅุถุงูุฉ ุงูุญุฌุฒ ูุฌุฏููุฉ ุงููููุฉ.
- `booking/tasks.py` โ ุชูููุฐ ุงููููุฉ ุจุนุฏ ุงูุชูุงุก ูุชุฑุฉ ุงูุณูุงุญ.
- `garage/models.py` โ ุงูุชุฃูุฏ ูู ุญุงูุฉ ุงูููุงู.
- `settings.py` โ ุฅุนุฏุงุฏ Celery ูุงูู broker (Redis).

---


booking/models.py โ ุฅุถุงูุฉ qr_code_image ููุญุฌุฒ.

booking/utils.py โ ููุฏ ุชูููุฏ QR.

booking/views.py โ ุฑุจุท QR ุจุงูุญุฌุฒ.

booking/serializers.py โ ุชุนุฏูู ุงูุชูุงุตูู ุงููุฑุณูุฉ ูููุฑููุช.





/api/bookings/initiate/ โ ูุฅูุดุงุก ุญุฌุฒ + QR

/api/bookings/<id>/ โ ุนุฑุถ ุชูุงุตูู ุงูุญุฌุฒ (ุจูุง ูู ุฐูู QR)

